-<!DOCTYPE html>
<html>
  <head>
<link href="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js"></script>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <title>IV Mostra</title>
    
    <link rel="stylesheet" href="bower_components/jquery-mobile-bower/css/jquery.mobile-1.4.0.min.css">
    <script src="bower_components/jquery/jquery.min.js"></script>
    
    <script src="http://maps.google.com/maps/api/js?sensor=true"></script>

    <script src="http://www.rachandotaxi.com.br/js/jquery-ui-maps/min/jquery.ui.map.full.min.js"></script>
    <script src="http://www.rachandotaxi.com.br/js/jquery-ui-maps/jquery.ui.map.extensions.js"></script>
    <script src="cordova.js"></script>
    <link rel="stylesheet" href="dist/css/styles.min.css">


    <style>
    #map_canvas {
      width: 100%;
      height: 100px;
    }
    </style>

  </head>
  <body>

    <!-- PAGE: IV Mostra -->
    <div data-role="page" id="one">
      <!-- content -->
      <div role="main" class="ui-content">
        <h2>IV Mostra</h2>

        <p>I have an <code>id</code> of "one" on my page container. I'm first in the source order so I'm shown when the page loads.</p>

        <p>This is a multi-page boilerplate template that you can copy to build your first jQuery Mobile page. This template contains multiple "page" containers inside, unlike a single page template that has just one page within it.</p>
      </div>
      <!-- # content -->

      <!-- Navbar -->
      <div data-role="navbar" class="nav-glyphish-example">
        <ul>
          <li><a href="#one" id="chat" data-icon="custom">IV Mostra</a></li>
          <li><a href="#prog" id="beer" data-icon="custom">Programação</a></li>
          <li><a href="#two" id="beer" data-icon="custom">Mapa(s)</a></li>
          <li><a href="#social" id="coffee" data-icon="custom">Compartilhe!</a></li>
        </ul>
      </div>
      <!-- # Navbar -->
    </div>
    <!-- # PAGE: IV Mostra -->





<!-- Start of first page: #one -->
<div data-role="page" id="prog">

      <div data-role="footer" class="nav-glyphish-example" data-theme="b">
    <div data-role="navbar" class="nav-glyphish-example" data-grid="d">
    <ul>
        <li><a href="#one" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b" id="chat" data-icon="custom">IV Mostra</a></li>
        <li><a href="#prog" id="beer" data-icon="custom">Programação</a></li>
        <li><a href="#two" class="ui-btn ui-shadow ui-corner-all">Mapa(s)</a></li>
        <li><a href="#social" id="coffee" data-icon="custom">Compartilhe!</a></li>
    </ul>
    </div>
</div>

  <div role="main" class="ui-content" >
    <h2>Programação</h2>

    <p>I have an <code>id</code> of "one" on my page container. I'm first in the source order so I'm shown when the page loads.</p>

    <p>This is a multi-page boilerplate template that you can copy to build your first jQuery Mobile page. This template contains multiple "page" containers inside, unlike a single page template that has just one page within it.</p>

  </div><!-- /content -->

</div><!-- /page one -->





<!-- Start of second page: #two -->
<div data-role="page" id="two" data-theme="a">

      <div data-role="footer" class="nav-glyphish-example" data-theme="b">
    <div data-role="navbar" class="nav-glyphish-example" data-grid="d">
    <ul>
        <li><a href="#one" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b" id="chat" data-icon="custom">IV Mostra</a></li>
        <li><a href="#prog" id="beer" data-icon="custom">Programação</a></li>
        <li><a href="#two" class="ui-btn ui-shadow ui-corner-all">Mapa(s)</a></li>
        <li><a href="#social" id="coffee" data-icon="custom">Compartilhe!</a></li>
    </ul>
    </div>
</div>

  <div role="main" class="ui-content">
    <h2>Two</h2>
  <div id="map_canvas" style="width:100%;height:600px"></div>
  <p id="geolocation">Finding geolocation...</p>
  <button onclick="irParaLocal()">Chegar ao Evento</button>
  <div id="panel"></div>  
  </div><!-- /content -->

</div><!-- /page two -->


<script type="text/javascript">
 var minha_posicao = null
 
$("#two").bind('pageinit', function() {
  $('#map_canvas').gmap().bind('init', function(ev, map) {
    $('#map_canvas').gmap('addMarker', {'position': '-15.816307,-47.8439705', 'bounds': true}).click(function() {
      $('#map_canvas').gmap('openInfoWindow', {'content': 'Hello World!'}, this);
    });
  });
  $('#map_canvas').gmap('option', 'zoom', 13);
  $('#map_canvas').gmap('refresh');
   
});
   
$("#two").bind('pageshow', function() {
  $('#map_canvas').gmap('refresh');
});
 
/**
 * Atualiza o Mapa com o zoom e o circulo
 */
function changeZoom(){

  setTimeout(function(){
    $('#map_canvas').gmap('option', 'zoom', 13);
    $('#map_canvas').gmap('refresh');
  },2000);
}   

/**
 * Pega o sua direção e localiza com o evento
 **/               
function irParaLocal(){
    var posicao_atual = ""+ position.coords.latitude  + "," + position.coords.longitude+"" ;
    alert(posicao_atual);
    $('#map_canvas').gmap('destroy');
    $('#map_canvas').gmap().bind('init', function(evt, map) { 
    $('#map_canvas').gmap('displayDirections', { 'origin': posicao_atual, 'destination': '-15.816307,-47.8439705', 'travelMode': google.maps.DirectionsTravelMode.DRIVING }, { 'panel': document.getElementById('panel') }, function(result, status) {
            if ( status === 'OK' ) {
                    //alert('Results found!');
            }
    });                                                                                                                                                                                                                       
  });
  $('#map_canvas').gmap('refresh');
}  

document.addEventListener("deviceready", onDeviceReady, false);

// device APIs are available
//
function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
}

// onSuccess Geolocation
//
function onSuccess(position) {
    var element = document.getElementById('geolocation');
    minha_posicao = position;
    element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                        'Longitude: '          + position.coords.longitude             + '<br />';
}

// onError Callback receives a PositionError object
//
function onError(error) {
    alert('code: '    + error.code    + '\n' +
          'message: ' + error.message + '\n');
}

</script>

  //http://stackoverflow.com/questions/10429225/geolocation-on-android-with-google-maps-v3-jquery-mobile
  
  http://stackoverflow.com/questions/5959788/google-maps-api-v3-how-show-the-direction-from-a-point-a-to-point-b-blue-line

    <!-- If development: Livereload -->
    <script type="text/javascript" src="http://localhost:35729/livereload.js"></script>
    <!-- END: Livereload -->
  </body>
</html>